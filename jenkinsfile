pipeline{
	agent any

        stages{
            stage("Build jar file"){
                steps{
                    withMaven(maven: 'Maven'){
                        sh 'mvn clean package'
                    }
                }
            }

            stage("Build app docker image"){
                steps{
                    sh 'docker build -t trackmapi:1.0 .'
                }
            }

            stage("Run springboot and mongodb containers"){
                steps{
                    sh 'docker-compose up'
                }
            }
        }



	/*
		stages{
			stage('Compile Stage'){
				steps{
					withMaven(maven : 'Maven'){
						sh 'mvn clean compile'
					}
				}
			}
			stage('Unit Testing Stage'){
				steps{
					withMaven(maven : 'Maven'){
						sh 'mvn clean test jacoco:report'
					}
				}
			}
			stage('Dummy Stage'){
				steps{
					echo 'Success'
				}
			}
		}
    */
}
